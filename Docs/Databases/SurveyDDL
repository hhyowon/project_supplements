
CREATE TABLE SURVEY
(
  SURVEY_TYPE_ID     VARCHAR(500) NOT NULL COMMENT '설문 폼 종류 ID',
  SURVEY_QUESTION_ID VARCHAR(100) NOT NULL COMMENT '설문 질문 ID',
  SURVEY_ID          VARCHAR(100) NOT NULL COMMENT ' 설문 ID',
  SURVEY_OPT_ID      VARCHAR(100) NOT NULL COMMENT '설문 선택지 ID',
  SURVEY_UID         VARCHAR(50)  NOT NULL COMMENT '설문결과ID',
  PRIMARY KEY (SURVEY_ID)
) COMMENT '설문 ';

CREATE TABLE SURVEY_OPT
(
  OPT_ORDER          INTEGER(50)  NOT NULL COMMENT '답항 순번',
  SURVEY_QUESTION_ID VARCHAR(100) NOT NULL COMMENT '설문 질문 ID',
  SURVEY_OPT         VARCHAR(100) NOT NULL COMMENT '설문 답항',
  SURVEY_OPT_ID      VARCHAR(100) NOT NULL COMMENT '설문 답항 ID',
  SURVEY_OPT_URL     VARCHAR(100) NOT NULL COMMENT '설문 답항 URL',
  SURVEY_OPT_WEB_URL VARCHAR(500) NOT NULL COMMENT '설문 답항 WEB URL',
  PRIMARY KEY (SURVEY_OPT_ID)
) COMMENT '설문 답항';

CREATE TABLE SURVEY_QUESTION
(
  QUESTION_ORDER     INTEGER(50)  NOT NULL COMMENT '질문 순번',
  SURVEY_QUESTION    VARCHAR(500) NOT NULL COMMENT '설문 질문',
  SURVEY_QUESTION_ID VARCHAR(100) NOT NULL COMMENT '설문 질문 ID',
  PRIMARY KEY (SURVEY_QUESTION_ID)
) COMMENT '설문 질문';

CREATE TABLE SURVEY_TYPE
(
  SURVEY_TYPE    VARCHAR(500) NOT NULL COMMENT '설문 폼 종류',
  SURVEY_TYPE_ID VARCHAR(100) NOT NULL COMMENT '설문 폼 종류 ID',
  PRIMARY KEY (SURVEY_TYPE_ID)
) COMMENT ' 설문 폼 종류 ';

CREATE TABLE SURVEY_TYPE_FOR_QUESTION
(
  SURVEY_TYPE_ID     VARCHAR(100) NOT NULL COMMENT '설문 폼 종류 ID',
  SURVEY_QUESTION_ID VARCHAR(100) NOT NULL COMMENT '설문 질문 ID'
) COMMENT '복용여부별 질문';

CREATE TABLE SURVEYRESULT
(
  USER_ID    VARCHAR(50) NOT NULL COMMENT '회원아이디',
  DATE_TIME  VARCHAR(50) NOT NULL COMMENT '설문날짜_시간',
  SURVEY_UID VARCHAR(50) NOT NULL COMMENT '설문결과ID',
  PRIMARY KEY (SURVEY_UID)
) COMMENT '설문결과';

ALTER TABLE SURVEY
  ADD CONSTRAINT FK_SURVEY_QUESTION_TO_SURVEY
    FOREIGN KEY (SURVEY_QUESTION_ID)
    REFERENCES SURVEY_QUESTION (SURVEY_QUESTION_ID);

ALTER TABLE SURVEY
  ADD CONSTRAINT FK_SURVEY_OPT_TO_SURVEY
    FOREIGN KEY (SURVEY_OPT_ID)
    REFERENCES SURVEY_OPT (SURVEY_OPT_ID);

ALTER TABLE SURVEY
  ADD CONSTRAINT FK_SURVEYRESULT_TO_SURVEY
    FOREIGN KEY (SURVEY_UID)
    REFERENCES SURVEYRESULT (SURVEY_UID);

ALTER TABLE SURVEY_OPT
  ADD CONSTRAINT FK_SURVEY_QUESTION_TO_SURVEY_OPT
    FOREIGN KEY (SURVEY_QUESTION_ID)
    REFERENCES SURVEY_QUESTION (SURVEY_QUESTION_ID);

ALTER TABLE SURVEY_TYPE_FOR_QUESTION
  ADD CONSTRAINT FK_SURVEY_TYPE_TO_SURVEY_TYPE_FOR_QUESTION
    FOREIGN KEY (SURVEY_TYPE_ID)
    REFERENCES SURVEY_TYPE (SURVEY_TYPE_ID);

ALTER TABLE SURVEY_TYPE_FOR_QUESTION
  ADD CONSTRAINT FK_SURVEY_QUESTION_TO_SURVEY_TYPE_FOR_QUESTION
    FOREIGN KEY (SURVEY_QUESTION_ID)
    REFERENCES SURVEY_QUESTION (SURVEY_QUESTION_ID);

ALTER TABLE SURVEYRESULT
  ADD CONSTRAINT FK_MEMBERS_TO_SURVEYRESULT
    FOREIGN KEY (USER_ID)
    REFERENCES MEMBERS (USER_ID);
